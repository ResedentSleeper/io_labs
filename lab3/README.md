# Лабораторная работа 3

**Название:** "Разработка драйверов сетевых устройств"

**Цель работы:** Получить знания и навыки разработки драйверов сетевых интерфейсов для операционной системы Linux.

**Выполнили:** Расковалова Алёна, Григориева Сардана
**Группа:** P33011

## Описание функциональности драйвера

При загрузке драйвер создает сетевой интерфейс `vni0`, который наследует настройки от интерфейса `lo`.

Помимо этого он создает файл `/proc/var1` с правами на ЧТЕНИЕ.

При чтении файла `/proc/var1` выводится информация о количестве обработанных и отброшенных пакетов:

```
Processed: 2; Dropped: 2
```

Где `Processed`: количество пакетов, которые подошли по условию;
`Dropped`: количество пакетов, которые были отброшены.

## Инструкция по сборке

Выполнить команду `sudo make`

## Инструкция пользователя

Для загрузки модуля выполнить команду `sudo insmod virt_net_if.ko` или `make load`

Для проверки кольцевого буфера в отдельном окне консоли выполнить команду: `dmesg -w | tail -n 10`

Для проверки содержимого служебного файла: `cat /proc/var1`

Для удаления модуля: `sudo rmmod virt_net_if` или `make unload`

## Примеры использования

Для того, чтобы драйвер начал работать, необходимо обеспечить трафик на интерфейсе `lo`, имеющем адрес `127.0.0.1`.

Воспользуемся для этого командой `ping`. После загрузки модуля необходимо выполнить:

```bash
ping 127.0.0.1
```
